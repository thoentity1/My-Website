<script>
document.getElementById('inviteForm').addEventListener('submit', function(e){
  e.preventDefault();

  const guestname = document.getElementById('guestname').value.trim();
  const admit = document.getElementById('admit').value.trim();
  const guestphone = document.getElementById('guestphone').value.trim().replace(/\D/g, '');

  if (!guestname || !admit || !guestphone) {
    alert("Please fill in all required fields.");
    return;
  }

  // Normalize SA numbers: +27 / 27 / 0xxx â†’ 27xxx
  let phone = guestphone;
  if (phone.startsWith("0")) {
    phone = "27" + phone.substring(1);
  } else if (phone.startsWith("27")) {
    phone = phone;
  } else if (phone.startsWith("27") === false && phone.length === 9) {
    phone = "27" + phone; // if short, assume SA local
  }

  const rsvpLink = "https://thoentity1.github.io/nikahI-A/";

  const msg = `ğŸ’ Wedding Invitation ğŸ’

Dear ${guestname},

You are invited to the wedding of
âœ¨ Imtiaz & Amaarah âœ¨

ğŸŸ Admits: ${admit}

ğŸ“… Date: Saturday, 01 November 2025
ğŸ•’ Time: 2:00 PM (Nikah & Reception thereafter)
ğŸ“ Venue: 45 Cotswold Road, Florida Hills, Roodepoort 1716

ğŸ‘‰ Please RSVP before 10 October 2025 here: ${rsvpLink}`;

  const waUrl = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;

  window.open(waUrl, "_blank");
  this.reset();
});
</script>
